---
title: Fix permission response race condition
status: closed
priority: 2
issue-type: task
created-at: "\"2026-01-08T16:00:38.679784+02:00\""
closed-at: "2026-01-08T16:15:47.852735+02:00"
close-reason: No race - single-threaded access via MCP poll. Fixed incorrect comment, added deinit for pending_response
---

handler.zig:838-841 and 473-493 access pending_response without synchronization. Poll loop reads/frees while message handler may write. Add mutex protection
