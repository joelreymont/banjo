---
title: [CRIT] Eliminate JSON serialize-parse round-trip
status: closed
priority: 2
issue-type: task
created-at: "\"2026-01-08T13:02:56.147014+02:00\""
closed-at: "2026-01-08T14:41:10.252053+02:00"
close-reason: Eliminated serialize-parse round-trip with sendMcpResultDirect
---

Files: src/nvim/mcp_server.zig:786-799, src/nvim/handler.zig:708-719 - Code serializes typed struct to JSON string then parses back to std.json.Value. This doubles allocations and parsing work. Fix: Construct std.json.Value directly or redesign API to pass typed values through. Impact: Significant performance overhead on every tool call notification.
